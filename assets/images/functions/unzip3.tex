---
---

\matrix (A) [collection, nodes={font=\footnotesize}] {
    \node (abc1) {$(a_1, a^\prime_1, a^{\prime\prime}_1)$}; &
    \node [elements between]; &
    \node (abcn) {$(a_n, a^\prime_n, a^{\prime\prime}_n)$}; \\
};

\matrix (A) [tuple of collections, below=2 of A] {
    \node (a1) {$a_1$}; &
    \node [elements between]; &
    \node (an) {$a_n$}; &
    \node [tuple separator]; &
    \node (b1) {$a^\prime_1$}; &
    \node [elements between]; &
    \node (bn) {$a^\prime_n$}; &
    \node [tuple separator]; &
    \node (c1) {$a^{\prime\prime}_1$}; &
    \node [elements between]; &
    \node (cn) {$a^{\prime\prime}_n$}; \\
};

\path [draw=none, name path=pa1] ($ (abc1.south) + (-.3, 0) $) .. controls +(0, -1.5) and +(0, 1.5) .. (a1);
\path [draw=none, name path=pb1] (abc1.south) .. controls +(0, -1.5) and +(0, 1.5) .. (b1);
\path [draw=none, name path=pc1] ($ (abc1.south) + (.3, 0) $) .. controls +(0, -1.5) and +(0, 1.5) .. (c1);
\path [draw=none, name path=pan] ($ (abcn.south) + (-.3, 0) $) .. controls +(0, -1.5) and +(0, 1.5) .. (an);
\path [draw=none, name path=pbn] (abcn.south) .. controls +(0, -1.5) and +(0, 1.5) .. (bn);

\draw [flow ->] ($ (abcn.south) + (.3, 0) $) .. controls +(0, -1.5) and +(0, 1.5) .. (cn);
\draw [flow ->] (abcn.south) .. controls +(0, -1.5) and +(0, 1.5) .. (bn);
\path [name intersections={of=pc1 and pbn, by={a}}] (a) pic [rotate=82, yshift=-.4] {bridge flow};

\draw [flow ->] ($ (abcn.south) + (-.3, 0) $) .. controls +(0, -1.5) and +(0, 1.5) .. (an);
\path [name intersections={of=pc1 and pan, by={a}}] (a) pic [rotate=20, yshift=-.1] {bridge flow};
\path [name intersections={of=pb1 and pan, by={a}}] (a) pic [rotate=14, yshift=.5] {bridge flow};

\draw [flow ->] ($ (abc1.south) + (.3, 0) $) .. controls +(0, -1.5) and +(0, 1.5) .. (c1);
\draw [flow ->] (abc1.south) .. controls +(0, -1.5) and +(0, 1.5) .. (b1);
\draw [flow ->] ($ (abc1.south) + (-.3, 0) $) .. controls +(0, -1.5) and +(0, 1.5) .. (a1);
