\node (f) [function] {$f$};
\node (g) [function, right=.5 of f] {\texttt{g}};

\draw [<- flow] (f.north io 1) -- +(0, .5)
    node [element, above] {$x$};
\draw [flow ->] (f.south io 1) -- +(0, -.5)
    node [element, below] {$y$};

\draw [<- flow] (g.north io 1) -- +(0, .5)
    node [element, above] {$y$};
\draw [flow ->] (g.south io 1) -- +(0, -.5)
    node [element, below] {$z$};

\node (f2) [function, right=2 of g, anchor=south] {$f$};
\node (g2) [function, below=of f2, anchor=north] {\texttt{g}};

\node (fog) [function, minimum height=2.5\masterunit, minimum width=1.3\masterunit] at (f2.south) {};

\draw [<- flow] (f2.north io 1) -- (fog.north io 1) -- +(0, .5)
    node [element, above] {$x$};
\draw [flow ->] (g2.south io 1) -- (fog.south io 1) -- +(0, -.5)
    node [element, below] {$z$};

\node at ($ (g.east)!.5!(fog.west) $) [big arrow];
